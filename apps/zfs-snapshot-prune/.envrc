# shellcheck shell=sh disable=SC2034

# use flake
use nix

if [ -d ".venv" ]; then
  VIRTUAL_ENV="$PWD/.venv"
fi

if [ "$VIRTUAL_ENV" = "" ] || [ ! -d "$VIRTUAL_ENV" ]; then
  log_status "No virtual environment exists. Executing \`uv venv\` to create one."
  uv venv
  VIRTUAL_ENV="$PWD/.venv"
fi

PATH_add "$VIRTUAL_ENV/bin"
export UV_ACTIVE=1 # or VENV_ACTIVE=1
export VIRTUAL_ENV
